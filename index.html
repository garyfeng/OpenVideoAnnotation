<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Video Annotation by garyfeng</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/garyfeng/OpenVideoAnnotation">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/garyfeng/OpenVideoAnnotation/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/garyfeng/OpenVideoAnnotation/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Video Annotation Experiment</h1>
          <p>Using Open Video Annotation</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/garyfeng">garyfeng</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <p>Video Annotation </p>

<p>Demo: <a href="http://garyfeng.github.io/videoAnn/index.html">http://garyfeng.github.io/videoAnn/index.html</a></p>

<hr>

<h1>Open Video Annotation</h1>

<h2>
<a id="annotation-plugin" class="anchor" href="#annotation-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Annotation Plugin</h2>

<p>Annotations.js is a plugin for Video JS player. The aim of this plugin is to create annotations in video-js.</p>

<h2>
<a id="live-demo" class="anchor" href="#live-demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Live-Demo</h2>

<p>There is a demo of the annotations plugin in the next webpage:</p>

<p><a href="http://danielcebrian.com/annotations/demo.html">http://danielcebrian.com/annotations/demo.html</a></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>To use the tool you need to install the <a href="https://github.com/videojs/video.js/">video-js player plugin</a>, <a href="https://github.com/danielcebrian/rangeslider-videojs">rangeslider plugin for video-js</a> and the <a href="https://github.com/okfn/annotator/">Annotator plugin</a> to annotate text and video.</p>

<p>In addition add annotations.min.js and annotations.min.css CDN distributed file to your head tag, just after
videojs:</p>

<div class="highlight highlight-text-html-basic"><pre>    &lt;<span class="pl-ent">head</span>&gt;
        <span class="pl-c">&lt;!-- Annotator --&gt;</span>
<span class="pl-s1">        &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
<span class="pl-s1">        &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://assets.annotateit.org/annotator/v1.2.5/annotator-full.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
        &lt;<span class="pl-ent">link</span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>http://assets.annotateit.org/annotator/v1.2.5/annotator.min.css<span class="pl-pds">"</span></span>&gt;

        <span class="pl-c">&lt;!--video-js--&gt;</span>
        &lt;<span class="pl-ent">link</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>http://vjs.zencdn.net/4.1/video-js.css<span class="pl-pds">"</span></span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span>&gt;
<span class="pl-s1">        &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>lib/video-js/video.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>

        <span class="pl-c">&lt;!--RangeSlider Pluging--&gt;</span>
<span class="pl-s1">        &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>lib/rangeslider.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
        &lt;<span class="pl-ent">link</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>lib/rangeslider.min.css<span class="pl-pds">"</span></span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span>&gt;

        <span class="pl-c">&lt;!--Annotations Pluging--&gt;</span>
<span class="pl-s1">        &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>build/annotations.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
        &lt;<span class="pl-ent">link</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>build/annotations.min.css<span class="pl-pds">"</span></span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span>&gt;
    &lt;/<span class="pl-ent">head</span>&gt;</pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Load all the videos in video-js with different id, as you can see in the <a href="https://github.com/videojs/video.js/blob/master/docs/setup.md">tutorial of video-js player</a> </p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">video</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>vid1<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>video-js vjs-default-skin<span class="pl-pds">"</span></span> <span class="pl-e">controls</span> <span class="pl-e">preload</span>=<span class="pl-s"><span class="pl-pds">"</span>none<span class="pl-pds">"</span></span> <span class="pl-e">width</span>=<span class="pl-s"><span class="pl-pds">"</span>640<span class="pl-pds">"</span></span> <span class="pl-e">height</span>=<span class="pl-s"><span class="pl-pds">"</span>264<span class="pl-pds">"</span></span>
poster=<span class="pl-s"><span class="pl-pds">"</span>http://video-js.zencoder.com/oceans-clip.png<span class="pl-pds">"</span></span>
data<span class="pl-e">-setup</span>=<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>&gt;
    &lt;<span class="pl-ent">source</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://video-js.zencoder.com/oceans-clip.mp4<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">'</span>video/mp4<span class="pl-pds">'</span></span> /&gt;
    &lt;<span class="pl-ent">source</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://video-js.zencoder.com/oceans-clip.webm<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">'</span>video/webm<span class="pl-pds">'</span></span> /&gt;
    &lt;<span class="pl-ent">source</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://video-js.zencoder.com/oceans-clip.ogv<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">'</span>video/ogg<span class="pl-pds">'</span></span> /&gt;
&lt;/<span class="pl-ent">video</span>&gt;</pre></div>

<p>To load and control the plugin from Javascript must select the </p><div> with the content to annotate. In addition add the plugin to the videojs, as follow:

<div class="highlight highlight-source-js"><pre><span class="pl-k">&lt;</span>script<span class="pl-k">&gt;</span>
    <span class="pl-k">var</span> options <span class="pl-k">=</span> {
            optionsAnnotator<span class="pl-k">:</span> {user<span class="pl-k">:</span> {},store<span class="pl-k">:</span> {}},
            optionsVideoJS<span class="pl-k">:</span> {},
            optionsRS<span class="pl-k">:</span> {},
            optionsOVA<span class="pl-k">:</span> {posBigNew<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>ul<span class="pl-pds">'</span></span>},
        }
    <span class="pl-c">//Add the div id to annotate by Annotator. In the demo.html the id is "airlock" too.</span>
    <span class="pl-k">var</span> ova <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">OpenVideoAnnotation.Annotator</span>($(<span class="pl-s"><span class="pl-pds">'</span>#airlock<span class="pl-pds">'</span></span>),options);

    <span class="pl-c">//(optional) Set the configuration for the users</span>
    ova.setCurrentUser($(<span class="pl-s"><span class="pl-pds">'</span>#username<span class="pl-pds">'</span></span>).val());

    $(<span class="pl-s"><span class="pl-pds">'</span>#username<span class="pl-pds">'</span></span>).change(<span class="pl-k">function</span> () {
        ova.setCurrentUser($(<span class="pl-v">this</span>).val());
    });

<span class="pl-k">&lt;</span><span class="pl-k">/</span>script<span class="pl-k">&gt;</span></pre></div>

<p>The initial options for the annotations is the position of the button for new annotations:</p>

<p>posBigNew (options):</p>

<ul>
<li>ul (up left) -by default-</li>
<li>ur (up right)</li>
<li>bl (below left) </li>
<li>br (below right)</li>
<li>c  (center)</li>
<li>none  (without button)</li>
</ul>

<p>NumAnnotations: it is the number of Annotation that will be load in the display. The other annotation will be hide under the scroll. (By default: 16)</p>

<h1>
<a id="url-api-to-preload-an-annotation" class="anchor" href="#url-api-to-preload-an-annotation" aria-hidden="true"><span class="octicon octicon-link"></span></a>URl API to preload an annotation</h1>

<p>This plugin allow to share an annotation with two methodologies:</p>

<p>The first method will send a stored annotation  in the database (ToDo)</p>

<p>The second method will send a new isolated annotation that is not in the database. The code to share a annotation with this method is:</p>

<p><a href="http://url-with-the-video.com/?ovaSrc=(Source)&amp;ovaContainer=(ContainerID)&amp;ovaStart=(Start)&amp;ovaEnd=(End)&amp;ovaText=(Text)&amp;ovaUser=(User)">http://url-with-the-video.com/?ovaSrc=(Source)&amp;ovaContainer=(ContainerID)&amp;ovaStart=(Start)&amp;ovaEnd=(End)&amp;ovaText=(Text)&amp;ovaUser=(User)</a></p>

<p>All the values between brackets must be replaced by the real value.</p>

<p>The obligatory values are:</p>

<ul>
<li>ovaSrc = source where is the video. For example, in the demo video with this plugin the source is in: <a href="http://video-js.zencoder.com/oceans-clip.mp4">http://video-js.zencoder.com/oceans-clip.mp4</a>
</li>
<li>ovaContainer = the id where we had put the video. In the demo is vid1</li>
<li>ovaStart = the time to start the video</li>
<li>ovaEnd = the time to end the video</li>
</ul>

<p>The optionals values are:</p>

<ul>
<li>ovaText = the text that the user will see.</li>
<li>ovaUser = the user who has sent the annotation</li>
</ul>

<p>Caution, all these variables must be ready to be in a URL link and take care of special characters like &amp;()#/. To do this, we can parse the string with decodeURIComponent().</p>

<p>An example of URL API is this:</p>

<p><a href="http://danielcebrian.com/annotations/demo.html?ovaContainer=vid1&amp;ovaSrc=http%3A%2F%2Fvideo-js.zencoder.com%2Foceans-clip.mp4&amp;ovaStart=2&amp;ovaEnd=10&amp;ovaText=This%20is%20test&amp;ovaUser=Test%20User">http://danielcebrian.com/annotations/demo.html?ovaContainer=vid1&amp;ovaSrc=http%3A%2F%2Fvideo-js.zencoder.com%2Foceans-clip.mp4&amp;ovaStart=2&amp;ovaEnd=10&amp;ovaText=This%20is%20test&amp;ovaUser=Test%20User</a></p>

<h1>
<a id="api-methods-to-take-control-of-the-plugin" class="anchor" href="#api-methods-to-take-control-of-the-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>API Methods to take control of the plugin</h1>

<p>Once the plugin is started and the DOM readed, we can control the Open Video Annotator giving the id of the video in the html. It is possible to use the following functions:</p>

<h3>
<a id="newvideoanvideoid" class="anchor" href="#newvideoanvideoid" aria-hidden="true"><span class="octicon octicon-link"></span></a>newVideoAn(VideoID)</h3>

<p>Create a new video annotation. VideoID is the ID in html for the video. In the demo example is 'vid1'.</p>

<div class="highlight highlight-source-js"><pre>    ova.newVideoAn(<span class="pl-s"><span class="pl-pds">'</span>divID<span class="pl-pds">'</span></span>);</pre></div>

<h3>
<a id="showdisplayvideoid" class="anchor" href="#showdisplayvideoid" aria-hidden="true"><span class="octicon octicon-link"></span></a>showDisplay(VideoID)</h3>

<p>Show the annotation display</p>

<div class="highlight highlight-source-js"><pre>    ova.showDisplay(<span class="pl-s"><span class="pl-pds">'</span>divID<span class="pl-pds">'</span></span>);</pre></div>

<h3>
<a id="hidedisplayvideoid" class="anchor" href="#hidedisplayvideoid" aria-hidden="true"><span class="octicon octicon-link"></span></a>hideDisplay(VideoID)</h3>

<p>Hide the annotation display</p>

<div class="highlight highlight-source-js"><pre>    ova.hideDisplay(<span class="pl-s"><span class="pl-pds">'</span>divID<span class="pl-pds">'</span></span>);</pre></div>

<h3>
<a id="setposbignewvideoid-position" class="anchor" href="#setposbignewvideoid-position" aria-hidden="true"><span class="octicon octicon-link"></span></a>setposBigNew(VideoID, position)</h3>

<p>Set the position of the new big annotation button. The values for the inlet position are:</p>

<ul>
<li>ul (up left) -by default-</li>
<li>ur (up right)</li>
<li>bl (below left) </li>
<li>br (below right)</li>
<li>c  (center)</li>
<li>none  (without button)</li>
</ul>

<div class="highlight highlight-source-js"><pre>    ova.setposBigNew(<span class="pl-s"><span class="pl-pds">'</span>divID<span class="pl-pds">'</span></span>,position);</pre></div>

<h3>
<a id="playtargetannotationid" class="anchor" href="#playtargetannotationid" aria-hidden="true"><span class="octicon octicon-link"></span></a>playTarget(annotationId)</h3>

<p>Play an annotation using the annotation Id, like this example:</p>

<div class="highlight highlight-source-js"><pre>    ova.playTarget(<span class="pl-s"><span class="pl-pds">'</span>8I2NBkJbQoeF3-bqgpcwTw<span class="pl-pds">'</span></span>);</pre></div>
</div>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
